// ==UserScript==
function _0x3154(){const _0x2c49c8=['default','.\x20Recommending\x20attack.','left','Should\x20you\x20attack\x20','querySelector','12509WoUris','text/html','head','top','TW\x20Report\x20Scanner:\x20No\x20new\x20spy\x20reports\x20found\x20across\x20all\x20scanned\x20pages.','status','getFullYear','scoutedResources','location','.\x20Status:\x20','TW\x20Report\x20Scanner:\x20Loading\x20and\x20de-duplicating\x20reports\x20from\x20cache\x20for\x20world\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','TW\x20Report\x20Scanner:\x20Failed\x20to\x20fetch\x20report\x20at\x20','Attack','loadCacheBtn','none','innerHTML','yesterday','No\x20report\x20found\x20in\x20cache\x20for\x20','today','preventDefault','appendChild','setHours','menu-item','TW\x20Report\x20Scanner:\x20Loaded\x20','recommendation','TW\x20Report\x20Scanner:\x20Failed\x20to\x20parse\x20cached\x20data.\x20It\x20might\x20be\x20corrupted.','createElement','TW\x20Report\x20Scanner:\x20No\x20cached\x20data\x20found\x20for\x20world\x20','21566UZLVbn','clientX','numeric','GET','testLogicBtn','TW\x20Report\x20Scanner:\x20Waiting\x20for\x20','getElementById','#attack_info_def\x20.village_anchor\x20a','\x20total\x20unique\x20reports\x20to\x20cache\x20for\x20world\x20','TW\x20Report\x20Scanner:\x20Starting\x20scan\x20of\x20','69vpGmHI','#attack_spy_resources','forEach','iron','#reportTable\x20tbody','cssText','scannerCloseBtn','64710HVXxgJ','village','style','set','getDate','toLowerCase','<tr><td\x20colspan=\x226\x22>No\x20reports\x20found.</td></tr>','name','wood','div','N/A','<a\x20href=\x22#\x22><span>Report\x20Scanner</span></a>','length','body','7690065JuwnYC','Cache\x20is\x20empty.\x20Recommending\x20attack\x20for\x20','replace','includes','/game.php?screen=report&mode=all&from=','tw_spy_reports_','Do\x20Not\x20Attack\x20(Resources\x20too\x20low,\x20try\x20again\x20around\x20','Checking\x20attack\x20logic\x20for:\x20','recommend-attack','setDate','textContent','74iLVLTv','Do\x20Not\x20Attack\x20(Failed\x20Spy\x20Mission)','getTime','5166EOMRCK','Found\x20latest\x20report\x20for\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerPanel\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x20150px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2080%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20900px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#f4e4bc;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#804000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x205px\x205px\x2015px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerHeader\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#c1a264;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20move;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerHeader\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#542e0a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerCloseBtn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#804000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#e9d7b4;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x202px\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerContent\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2060vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerControls\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#c1a264;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerControls\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#c1a264;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#804000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#scannerControls\x20button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#d1b274;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#reportTable\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-collapse:\x20collapse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#reportTable\x20th,\x20#reportTable\x20td\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#c1a264;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20left;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#reportTable\x20th\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#e9d7b4;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#reportTable\x20.recommend-attack\x20{\x20color:\x20green;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#reportTable\x20.recommend-no-attack\x20{\x20color:\x20red;\x20font-weight:\x20bold;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22scannerHeader\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Spy\x20Report\x20Scanner</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22scannerCloseBtn\x22>X</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22scannerControls\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22scanBtn\x22>Scan\x20Reports</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22loadCacheBtn\x22>Load\x20From\x20Cache</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22testLogicBtn\x22>Test\x20Attack\x20Logic</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22scannerContent\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20id=\x22reportTable\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Village</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Recommendation</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Send\x20Ram?</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Received</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Resources\x20(W/C/I)</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wall</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</thead>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><td\x20colspan=\x226\x22>Scan\x20or\x20load\x20from\x20cache\x20to\x20see\x20reports.</td></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','values','Yes','load','hostname','td:last-child','Scan\x20Reports','setItem','addEventListener','a.report-link','getAttribute','TW\x20Report\x20Scanner:\x20Failed\x20to\x20parse\x20building\x20data\x20JSON.','size','span.nowrap','offsetTop','parseFromString','parse','match','\x27).\x20Returning\x20false.','onmousemove','\x20reports\x20to\x20load...','Received','clay','10775640dEKTSP','168364MhviiS','get','trim','log','split','event','error','Success','3934197UMPTxA','#report_list\x20tr[class*=\x22report-\x22]','responseText','level','all','Scanning...','Recommendation\x20is\x20\x27Attack\x27.\x20Returning\x20true.','22zJSdqZ','TW\x20Report\x20Scanner:\x20Error\x20fetching\x20report\x20details\x20from\x20','from','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','offsetLeft','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22','menu_row','onmouseup','TW\x20Report\x20Scanner:\x20Saving\x20','data-title','TW\x20Report\x20Scanner:\x20An\x20error\x20occurred\x20while\x20fetching\x20report\x20pages.','scannerPanel','value','block','clientY','Do\x20Not\x20Attack\x20(Wall\x20too\x20high)','villageCoordinate','push','--------------------------------------------','display','click','recommend-no-attack','scanBtn'];_0x3154=function(){return _0x2c49c8;};return _0x3154();}function _0xd593(_0x4fe582,_0x2b597e){const _0x315424=_0x3154();return _0xd593=function(_0xd5930b,_0x28401d){_0xd5930b=_0xd5930b-0xe7;let _0x440533=_0x315424[_0xd5930b];return _0x440533;},_0xd593(_0x4fe582,_0x2b597e);}(function(_0x11c352,_0x52dbbe){const _0x536cf2=_0xd593,_0x5af0da=_0x11c352();while(!![]){try{const _0x3aa720=-parseInt(_0x536cf2(0x150))/0x1*(-parseInt(_0x536cf2(0xea))/0x2)+-parseInt(_0x536cf2(0x15a))/0x3*(-parseInt(_0x536cf2(0x108))/0x4)+parseInt(_0x536cf2(0x16f))/0x5+parseInt(_0x536cf2(0xed))/0x6*(-parseInt(_0x536cf2(0x133))/0x7)+-parseInt(_0x536cf2(0x107))/0x8+parseInt(_0x536cf2(0x110))/0x9+parseInt(_0x536cf2(0x161))/0xa*(parseInt(_0x536cf2(0x117))/0xb);if(_0x3aa720===_0x52dbbe)break;else _0x5af0da['push'](_0x5af0da['shift']());}catch(_0x21ad6e){_0x5af0da['push'](_0x5af0da['shift']());}}}(_0x3154,0xd40d1),(function(){'use strict';const _0x120c2c=_0xd593;const _0x5e8373=0x3,_0x5c476d=0xc;function _0x298e44(){const _0x70fc34=_0xd593,_0x11ccdb=document[_0x70fc34(0x14e)]('style');_0x11ccdb[_0x70fc34(0x143)]=_0x70fc34(0xef),document[_0x70fc34(0x135)][_0x70fc34(0x148)](_0x11ccdb);}function _0x500517(){const _0x74f848=_0xd593,_0x238c39=document[_0x74f848(0x14e)](_0x74f848(0x16a));_0x238c39['id']=_0x74f848(0x122),_0x238c39[_0x74f848(0x143)]=_0x74f848(0xf0),document[_0x74f848(0x16e)][_0x74f848(0x148)](_0x238c39),document[_0x74f848(0x156)](_0x74f848(0x160))[_0x74f848(0xf8)](_0x74f848(0x12b),()=>_0x238c39[_0x74f848(0x163)][_0x74f848(0x12a)]=_0x74f848(0x142)),document['getElementById'](_0x74f848(0x12d))[_0x74f848(0xf8)](_0x74f848(0x12b),_0xee533d),document[_0x74f848(0x156)](_0x74f848(0x141))[_0x74f848(0xf8)](_0x74f848(0x12b),()=>{const _0x5e0491=_0x74f848,_0x210c0e=Array[_0x5e0491(0x119)](_0x35d0f4(![])[_0x5e0491(0xf1)]());_0x5e57e5(_0x210c0e);}),document[_0x74f848(0x156)](_0x74f848(0x154))[_0x74f848(0xf8)]('click',()=>{const _0x4d258d=_0x74f848,_0x163092=prompt('Enter\x20village\x20coordinates\x20to\x20test\x20(e.g.,\x20111|222):');if(_0x163092){const _0x23e0f6=_0x1a221d(_0x163092);alert(_0x4d258d(0x131)+_0x163092+'?\x20\x0a\x0aResult:\x20'+_0x23e0f6);}}),_0x19d02f(_0x238c39);}function _0x5e57e5(_0x1b7614){const _0x12beae=_0xd593,_0x2695d8=document['querySelector'](_0x12beae(0x15e));_0x2695d8[_0x12beae(0x143)]='';if(!_0x1b7614||_0x1b7614[_0x12beae(0x16d)]===0x0){_0x2695d8[_0x12beae(0x143)]=_0x12beae(0x167);return;}_0x1b7614[_0x12beae(0x15c)](_0x5100f3=>{const _0x4456c7=_0x12beae,_0x499904=_0x2695d8['insertRow'](),_0x499911=_0x5100f3[_0x4456c7(0x14c)]==='Attack'?_0x4456c7(0xe7):_0x4456c7(0x12c),_0x74138a=_0x5100f3[_0x4456c7(0x13a)],_0x31fa53=_0x5100f3[_0x4456c7(0x138)]==='Success'?(_0x74138a[_0x4456c7(0x169)]||0x0)+'/'+(_0x74138a[_0x4456c7(0x106)]||0x0)+'/'+(_0x74138a['iron']||0x0):_0x4456c7(0x16b);_0x499904[_0x4456c7(0x143)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5100f3[_0x4456c7(0x162)]+_0x4456c7(0x11c)+_0x499911+'\x22>'+_0x5100f3[_0x4456c7(0x14c)]+_0x4456c7(0x13e)+(_0x5100f3['send_ram']?_0x4456c7(0xf2):'No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5100f3[_0x4456c7(0x105)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31fa53+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5100f3['buildings']['Wall']||(_0x5100f3[_0x4456c7(0x138)]===_0x4456c7(0x10f)?0x0:_0x4456c7(0x16b)))+_0x4456c7(0x11a);});}function _0x19d02f(_0x2cded4){const _0x383783=_0xd593;let _0x3340be=0x0,_0x477e81=0x0,_0x1cb664=0x0,_0xe25888=0x0;const _0x6c1e09=document[_0x383783(0x156)]('scannerHeader');_0x6c1e09&&(_0x6c1e09['onmousedown']=_0x456c4f);function _0x456c4f(_0x2b4817){const _0x16fc1c=_0x383783;_0x2b4817=_0x2b4817||window[_0x16fc1c(0x10d)],_0x2b4817['preventDefault'](),_0x1cb664=_0x2b4817['clientX'],_0xe25888=_0x2b4817[_0x16fc1c(0x125)],document['onmouseup']=_0x5d8303,document[_0x16fc1c(0x103)]=_0x49971b;}function _0x49971b(_0x33c299){const _0x229bea=_0x383783;_0x33c299=_0x33c299||window[_0x229bea(0x10d)],_0x33c299['preventDefault'](),_0x3340be=_0x1cb664-_0x33c299[_0x229bea(0x151)],_0x477e81=_0xe25888-_0x33c299['clientY'],_0x1cb664=_0x33c299[_0x229bea(0x151)],_0xe25888=_0x33c299['clientY'],_0x2cded4[_0x229bea(0x163)][_0x229bea(0x136)]=_0x2cded4[_0x229bea(0xfe)]-_0x477e81+'px',_0x2cded4['style'][_0x229bea(0x130)]=_0x2cded4[_0x229bea(0x11b)]-_0x3340be+'px';}function _0x5d8303(){const _0x4ddfdf=_0x383783;document[_0x4ddfdf(0x11e)]=null,document['onmousemove']=null;}}function _0x52b5f5(_0x433963){const _0x3a9665=_0xd593;if(!_0x433963||typeof _0x433963!=='string')return null;const _0x5d6764=new Date();let _0x54eba7;try{if(_0x433963[_0x3a9665(0x166)]()[_0x3a9665(0x172)](_0x3a9665(0x146))){const _0x38a002=_0x433963[_0x3a9665(0x101)](/(\d{1,2}):(\d{2})/);_0x38a002&&(_0x54eba7=new Date(),_0x54eba7[_0x3a9665(0x149)](parseInt(_0x38a002[0x1],0xa),parseInt(_0x38a002[0x2],0xa),0x0,0x0));}else{if(_0x433963['toLowerCase']()[_0x3a9665(0x172)](_0x3a9665(0x144))){const _0xb63a47=_0x433963[_0x3a9665(0x101)](/(\d{1,2}):(\d{2})/);_0xb63a47&&(_0x54eba7=new Date(),_0x54eba7['setDate'](_0x54eba7[_0x3a9665(0x165)]()-0x1),_0x54eba7['setHours'](parseInt(_0xb63a47[0x1],0xa),parseInt(_0xb63a47[0x2],0xa),0x0,0x0));}else _0x54eba7=new Date(_0x433963+'\x20'+_0x5d6764[_0x3a9665(0x139)]());}return isNaN(_0x54eba7[_0x3a9665(0xec)]())?null:_0x54eba7;}catch(_0x1addea){return null;}}function _0x5b64e4(){const _0x7812ec=_0xd593;return window[_0x7812ec(0x13b)][_0x7812ec(0xf4)][_0x7812ec(0x10c)]('.')[0x0];}function _0x5a1701(){const _0x3fba62=_0xd593,_0x526af9=_0x5b64e4();return _0x3fba62(0x174)+_0x526af9;}function _0x29310f(_0x53a86f){const _0x3171a0=_0xd593,_0x5734e8=_0x5a1701();if(!_0x53a86f)return;console[_0x3171a0(0x10b)](_0x3171a0(0x11f)+_0x53a86f[_0x3171a0(0x16d)]+_0x3171a0(0x158)+_0x5b64e4()+'...'),localStorage[_0x3171a0(0xf7)](_0x5734e8,JSON['stringify'](_0x53a86f));}function _0x35d0f4(_0x27533b=![]){const _0x546967=_0xd593,_0x1b6113=_0x5a1701(),_0x12b92d=localStorage['getItem'](_0x1b6113),_0x2a0e2d=new Map();if(_0x12b92d)try{const _0x39f654=JSON[_0x546967(0x100)](_0x12b92d);_0x27533b&&console[_0x546967(0x10b)](_0x546967(0x13d)+_0x5b64e4()+'...'),_0x39f654['forEach'](_0x5bb879=>{const _0x168995=_0x546967;if(!_0x5bb879||!_0x5bb879[_0x168995(0x127)])return;const _0x2a8cf4=_0x2a0e2d[_0x168995(0x109)](_0x5bb879['villageCoordinate']);if(!_0x2a8cf4)_0x2a0e2d[_0x168995(0x164)](_0x5bb879[_0x168995(0x127)],_0x5bb879);else{const _0x2b834a=_0x52b5f5(_0x2a8cf4[_0x168995(0x105)]),_0x1538b0=_0x52b5f5(_0x5bb879[_0x168995(0x105)]);_0x1538b0&&(!_0x2b834a||_0x1538b0>_0x2b834a)&&_0x2a0e2d[_0x168995(0x164)](_0x5bb879['villageCoordinate'],_0x5bb879);}}),_0x27533b&&(console[_0x546967(0x10b)]('---\x20CACHED\x20SPY\x20REPORT\x20DATA\x20(LATEST\x20ONLY)\x20---'),console[_0x546967(0x10b)](Array['from'](_0x2a0e2d[_0x546967(0xf1)]())),console['log'](_0x546967(0x129)));}catch(_0x532d1b){console[_0x546967(0x10e)](_0x546967(0x14d),_0x532d1b),localStorage['removeItem'](_0x1b6113);}else _0x27533b&&console[_0x546967(0x10b)](_0x546967(0x14f)+_0x5b64e4()+'.');return _0x2a0e2d;}async function _0xee533d(){const _0x2836a0=_0xd593;console[_0x2836a0(0x10b)](_0x2836a0(0x159)+_0x5e8373+'\x20report\x20pages...'),document[_0x2836a0(0x156)]('scanBtn')[_0x2836a0(0xe9)]=_0x2836a0(0x115);const _0x52d7c4=_0x35d0f4(![]);console[_0x2836a0(0x10b)](_0x2836a0(0x14b)+_0x52d7c4[_0x2836a0(0xfc)]+'\x20unique\x20reports\x20from\x20cache\x20to\x20begin\x20merge.');const _0x39a3f7=[];for(let _0x4ba9ee=0x0;_0x4ba9ee<_0x5e8373;_0x4ba9ee++){const _0x583bf8=_0x4ba9ee*_0x5c476d,_0x459f1b=_0x2836a0(0x173)+_0x583bf8;_0x39a3f7[_0x2836a0(0x128)](_0x3cf9f3(_0x459f1b));}try{const _0x2d22e8=await Promise['all'](_0x39a3f7),_0x33b2b8=[];for(const _0x42dd58 of _0x2d22e8){_0x42dd58&&_0x3a358a(_0x42dd58,_0x33b2b8);}if(_0x33b2b8['length']===0x0){console[_0x2836a0(0x10b)](_0x2836a0(0x137)),_0x29310f(Array['from'](_0x52d7c4[_0x2836a0(0xf1)]())),document[_0x2836a0(0x156)](_0x2836a0(0x12d))['textContent']=_0x2836a0(0xf6);return;}console['log'](_0x2836a0(0x155)+_0x33b2b8['length']+_0x2836a0(0x104));const _0x5bc9ec=(await Promise[_0x2836a0(0x114)](_0x33b2b8))['filter'](_0x39e1c7=>_0x39e1c7!==null);_0x5bc9ec['forEach'](_0x4d32f5=>{const _0x5c5cea=_0x2836a0,_0x5453bf=_0x52d7c4['get'](_0x4d32f5[_0x5c5cea(0x127)]);if(!_0x5453bf)_0x52d7c4[_0x5c5cea(0x164)](_0x4d32f5[_0x5c5cea(0x127)],_0x4d32f5);else{const _0x1ea3a1=_0x52b5f5(_0x5453bf[_0x5c5cea(0x105)]),_0x58414c=_0x52b5f5(_0x4d32f5[_0x5c5cea(0x105)]);_0x58414c&&(!_0x1ea3a1||_0x58414c>_0x1ea3a1)&&_0x52d7c4[_0x5c5cea(0x164)](_0x4d32f5['villageCoordinate'],_0x4d32f5);}});const _0x52e545=Array[_0x2836a0(0x119)](_0x52d7c4[_0x2836a0(0xf1)]());_0x5e57e5(_0x52e545),_0x29310f(_0x52e545);}catch(_0x6f0b0){console[_0x2836a0(0x10e)](_0x2836a0(0x121),_0x6f0b0);}finally{document[_0x2836a0(0x156)](_0x2836a0(0x12d))['textContent']='Scan\x20Reports';}}function _0x3cf9f3(_0x5dc39d){return new Promise(_0x5d1a48=>{const _0x2cf567=_0xd593;GM_xmlhttpRequest({'method':_0x2cf567(0x153),'url':_0x5dc39d,'onload':function(_0x4f2515){const _0x1dde80=_0x2cf567;if(_0x4f2515[_0x1dde80(0x138)]>=0xc8&&_0x4f2515[_0x1dde80(0x138)]<0x12c){const _0x352bc0=new DOMParser();_0x5d1a48(_0x352bc0['parseFromString'](_0x4f2515[_0x1dde80(0x112)],_0x1dde80(0x134)));}else console[_0x1dde80(0x10e)]('TW\x20Report\x20Scanner:\x20Failed\x20to\x20fetch\x20report\x20page\x20at\x20'+_0x5dc39d+'.\x20Status:\x20'+_0x4f2515[_0x1dde80(0x138)]),_0x5d1a48(null);},'onerror':function(_0x78f6a0){console['error']('TW\x20Report\x20Scanner:\x20Error\x20fetching\x20report\x20page\x20at\x20'+_0x5dc39d+'.',_0x78f6a0),_0x5d1a48(null);}});});}function _0x3a358a(_0x94d956,_0x2b02cf){const _0x7bdac3=_0xd593,_0x208e6a=_0x94d956['querySelectorAll'](_0x7bdac3(0x111));for(const _0xa17034 of _0x208e6a){const _0x43e94e=_0xa17034[_0x7bdac3(0x132)]('img[src*=\x22graphic/command/spy.webp\x22]');if(!_0x43e94e)continue;const _0x51fe87=_0xa17034[_0x7bdac3(0x132)](_0x7bdac3(0xf9));if(!_0x51fe87)continue;const _0x4b306a=_0x51fe87[_0x7bdac3(0xe9)]['trim'](),_0xb4913d=_0x4b306a[_0x7bdac3(0x101)](/\(\d+\|\d+\)/g);if(!_0xb4913d||_0xb4913d[_0x7bdac3(0x16d)]<0x2)continue;const _0x3db6ad=_0xb4913d[_0xb4913d['length']-0x1],_0x5a853f=_0x3db6ad[_0x7bdac3(0x171)](/[()]/g,''),_0x4b3c0d=_0x51fe87['href'],_0x517239=_0xa17034[_0x7bdac3(0x132)](_0x7bdac3(0xf5)),_0x47a662=_0x517239?_0x517239['textContent']['trim']():_0x7bdac3(0x16b);_0x2b02cf[_0x7bdac3(0x128)](_0x8cc324(_0x4b3c0d,_0x5a853f,_0x47a662));}}function _0x8cc324(_0x179f36,_0x2a024b,_0x2decfb){return new Promise(_0x53baa0=>{const _0x59c76f=_0xd593;GM_xmlhttpRequest({'method':_0x59c76f(0x153),'url':_0x179f36,'onload':function(_0x27ef48){const _0x49be14=_0x59c76f;if(_0x27ef48[_0x49be14(0x138)]>=0xc8&&_0x27ef48[_0x49be14(0x138)]<0x12c){const _0x4fba2c=_0x571a86(_0x27ef48[_0x49be14(0x112)],_0x2a024b,_0x2decfb);_0x53baa0(_0x4fba2c);}else console[_0x49be14(0x10e)](_0x49be14(0x13f)+_0x179f36+_0x49be14(0x13c)+_0x27ef48[_0x49be14(0x138)]),_0x53baa0(null);},'onerror':function(_0x4eb553){const _0x1f66c9=_0x59c76f;console['error'](_0x1f66c9(0x118)+_0x179f36+'.',_0x4eb553),_0x53baa0(null);}});});}function _0x571a86(_0x92e550,_0x4f49d3,_0x4f5f7e){const _0x26ef1e=_0xd593,_0x2efe30=new DOMParser(),_0x16c934=_0x2efe30[_0x26ef1e(0xff)](_0x92e550,'text/html'),_0x128ce3=_0x16c934[_0x26ef1e(0x132)](_0x26ef1e(0x157));if(!_0x128ce3)return null;const _0x53f4ef=_0x128ce3[_0x26ef1e(0xe9)][_0x26ef1e(0x10a)](),_0x4e9487=_0x16c934['querySelector'](_0x26ef1e(0x15b));if(!_0x4e9487)return{'village':_0x53f4ef,'recommendation':_0x26ef1e(0xeb),'send_ram':![],'Received':_0x4f5f7e,'villageCoordinate':_0x4f49d3,'status':'Failed\x20Spy\x20Mission\x20(No\x20Data)','scoutedResources':{},'buildings':{}};const _0x25a17a={},_0x41156c=_0x4e9487['querySelectorAll'](_0x26ef1e(0xfd));_0x41156c[_0x26ef1e(0x15c)](_0x2255f4=>{const _0x3ccf90=_0x26ef1e,_0x50a080=_0x2255f4['querySelector']('span[data-title],\x20span[title]');if(_0x50a080){const _0x162fd9=(_0x50a080[_0x3ccf90(0xfa)](_0x3ccf90(0x120))||_0x50a080[_0x3ccf90(0xfa)]('title'))[_0x3ccf90(0x166)](),_0x4c204a=_0x162fd9==='stone'?'clay':_0x162fd9,_0x18c1bc=parseInt(_0x2255f4[_0x3ccf90(0xe9)]['trim']()[_0x3ccf90(0x171)](/\./g,''),0xa);_0x25a17a[_0x4c204a]=_0x18c1bc;}});const _0x58a44c=_0x16c934[_0x26ef1e(0x132)]('#attack_spy_building_data');let _0x44d29e={};if(_0x58a44c&&_0x58a44c[_0x26ef1e(0x123)])try{const _0xe5fc6d=JSON['parse'](_0x58a44c[_0x26ef1e(0x123)]);_0xe5fc6d[_0x26ef1e(0x15c)](_0x5788fb=>{const _0x5177f6=_0x26ef1e;_0x44d29e[_0x5788fb[_0x5177f6(0x168)]]=parseInt(_0x5788fb[_0x5177f6(0x113)],0xa);});}catch(_0x419f84){console[_0x26ef1e(0x10e)](_0x26ef1e(0xfb),_0x419f84);}let _0x40b3b9=_0x26ef1e(0x140);const _0x123e09=_0x44d29e['Wall']||0x0,_0x52e6e5=(_0x25a17a[_0x26ef1e(0x169)]||0x0)+(_0x25a17a[_0x26ef1e(0x106)]||0x0)+(_0x25a17a[_0x26ef1e(0x15d)]||0x0),_0x545272=_0x123e09>=0x5,_0xa67a87=_0x52e6e5<=0x7d0;if(_0x545272&&_0xa67a87)_0x40b3b9='Do\x20Not\x20Attack\x20(Wall\x20too\x20high\x20and\x20resources\x20too\x20low)';else{if(_0x545272)_0x40b3b9=_0x26ef1e(0x126);else{if(_0xa67a87){const _0x3c7a51=new Date();_0x3c7a51[_0x26ef1e(0xe8)](_0x3c7a51[_0x26ef1e(0x165)]()+0xe);const _0x552037=_0x3c7a51['toLocaleString'](_0x26ef1e(0x12e),{'month':'short','day':_0x26ef1e(0x152)});_0x40b3b9=_0x26ef1e(0x175)+_0x552037+')';}}}const _0x2b0b45=_0x40b3b9['includes']('Wall\x20too\x20high');return{'village':_0x53f4ef,'recommendation':_0x40b3b9,'send_ram':_0x2b0b45,'Received':_0x4f5f7e,'villageCoordinate':_0x4f49d3,'status':_0x26ef1e(0x10f),'scoutedResources':_0x25a17a,'buildings':_0x44d29e};}function _0x1a221d(_0x3f3953){const _0x2274c4=_0xd593;console[_0x2274c4(0x10b)](_0x2274c4(0x176)+_0x3f3953);const _0x1a5403=_0x35d0f4(![]);if(_0x1a5403[_0x2274c4(0xfc)]===0x0)return console[_0x2274c4(0x10b)](_0x2274c4(0x170)+_0x3f3953+'.'),!![];const _0x287358=_0x1a5403[_0x2274c4(0x109)](_0x3f3953);if(!_0x287358)return console[_0x2274c4(0x10b)](_0x2274c4(0x145)+_0x3f3953+_0x2274c4(0x12f)),!![];return console[_0x2274c4(0x10b)](_0x2274c4(0xee)+_0x3f3953+':',_0x287358),_0x287358['recommendation']===_0x2274c4(0x140)?(console[_0x2274c4(0x10b)](_0x2274c4(0x116)),!![]):(console[_0x2274c4(0x10b)]('Recommendation\x20is\x20not\x20\x27Attack\x27\x20(\x27'+_0x287358[_0x2274c4(0x14c)]+_0x2274c4(0x102)),![]);}window[_0x120c2c(0xf8)](_0x120c2c(0xf3),function(){const _0x2871d1=_0x120c2c;_0x298e44(),_0x500517();const _0x10be46=document['getElementById'](_0x2871d1(0x11d));if(_0x10be46){const _0x3fec2a=document[_0x2871d1(0x14e)]('td');_0x3fec2a['className']=_0x2871d1(0x14a),_0x3fec2a['innerHTML']=_0x2871d1(0x16c),_0x3fec2a['querySelector']('a')[_0x2871d1(0x163)][_0x2871d1(0x15f)]='color:\x20#006400\x20!important;\x20font-weight:\x20bold;',_0x3fec2a[_0x2871d1(0xf8)](_0x2871d1(0x12b),_0x30cff5=>{const _0x14d866=_0x2871d1;_0x30cff5[_0x14d866(0x147)]();const _0x58d987=document[_0x14d866(0x156)](_0x14d866(0x122));_0x58d987[_0x14d866(0x163)][_0x14d866(0x12a)]=_0x58d987['style'][_0x14d866(0x12a)]===_0x14d866(0x142)?_0x14d866(0x124):_0x14d866(0x142);}),_0x10be46['appendChild'](_0x3fec2a);}});}()));
